
{% extends "base.html" %}



{% block content %}

<div class='row mt-3 mb-3'>
    <div class='col-sm-12'>
        <div class="my-1 p-3 bg-white rounded shadow">
            <h5>All Orders <span class='text-muted'>/ {{object_list.count }} found</span></h5>
            <span class=''><small>Staff User: (<a  href="{% url 'accounts:user-home' %}" class=''> {{ request.user.email }} </a>) {% if request.user.is_sub_member %}<span class="badge badge-success ml-1">Subscriber <i class="fas fa-check"></i></span>{% endif %}</small></span>
        </div>
    </div>
</div>



{% if object_list|length == 0 %}

<div class='row'>
    <div class='col-sm-12 mx-auto text-center'>
        <div class='card'>
            <div class='card-body'>
                <p class='lead'>
                You do not currently have orders.
                </p>
            </div>
        </div>
    </div>
</div>
{% else  %}

<div class='row'>
    <div class='col-sm-12 mx-auto'>
        <div class='card shadow'>
            <div class='card-body'>

                <table class='table table-sm'>
                <p class='legal-sm text-muted float-right'>last updated: {{ latest_order.timestamp|date:"D d M Y" }} </p>
                <thead><th>Order ID</th><th>Customer</th><th>Pickup Time</th><th>Total</th><th>Status</th></thead>
                {% for object in object_list %}
                <tr>
                <td>
                <a href='{{ object.staff_get_absolute_url }}'>#{% if object.order_id %}{{ object.order_id }}{% else %}{{ object.id }}{% endif %}</a>
                </td>
                <td>
                {{ object.user }} <a class='btn btn-link btn-sm' href='{{ object.user.staff_get_absolute_url }}'><i class="fas fa-external-link-alt"></i></a>
                </td>
                <td>
                    {{ object.pickup_date }} - {{ object.pickup_time_slot }}
                </td>                
                <td>
                ${{ object.cart.total }}
                </td>
                <td>
                {% if object.status == 'paid' %}
                {{ object.status }} <span class='paid-green'><i class="far fa-check-circle"></i></span>
                {% else %}
                {{ object.status }}
                {% endif %}
                </td>
                </tr>
                {% endfor %}

                </table>
            </div>
        </div>
    </div>
</div>
{% endif %}



{% endblock %}